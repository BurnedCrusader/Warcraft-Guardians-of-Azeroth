decisions = {
	become_brewmaster = {
		is_high_prio = yes # Will show an alert once decision is enabled
		
		ai_check_interval = 120
		
		only_playable = yes
		
		potential = {
			#Brewmaster race or player
			OR = {
				culture_group = vrykul_group
				culture_group = ogre_group
				culture_group = dwarf_group
				culture_group = pandaren_group
				ai = no
			}
			has_focus = focus_carousing
			lifestyle_traits = 0
			can_be_drunkard_physically_trigger = yes
			NOT = { has_character_flag = becoming_brewmaster }
			NOT = {	trait = brewmaster }
		}
		allow = {
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			wealth = 100
			lifestyle_traits < 1
		}
		effect = {
			set_character_flag = do_not_disturb
			set_character_flag = becoming_brewmaster
			wealth = -100
			character_event = { id = WCLIFES.1 }
		}
		ai_will_do = {
			factor = 1
		}
	}
	make_brew = {
		is_high_prio = yes # Will show an alert once decision is enabled
		
		ai_check_interval = 120
		
		only_playable = yes
		
		potential = {
			trait = brewmaster
		}
		allow = {
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
			wealth = 100
		}
		effect = {
			set_character_flag = do_not_disturb
			wealth = -100
			character_event = { id = WCLIFES.10 }
		}
		ai_will_do = {
			factor = 1
		}
	}
}
targetted_decisions = {
	drink_brew = {
		filter = realm_including_me
		third_party_filter = artifacts
		third_party = FROM
		show_third_party_potential = yes
		ai_target_filter = court_including_me
		ai_check_interval = 24

		only_playable = yes

		from_potential = {
			is_untouchable_trigger = no
			
			any_artifact = { has_artifact_flag = alcohol }
			trait = brewmaster
		}

		potential = {
			is_adult = yes
			is_ill = no
			is_incapable = no
			prisoner = no
			can_be_drunkard_physically_trigger = yes
			
			is_within_diplo_range = FROM
		}
		third_party_potential = {
			FROMFROM = {
				has_artifact_flag = alcohol
			}
		}
		third_party_allow = {}
		allow = {	
			ROOT = {
				is_inaccessible_trigger = no
				NOT = {
					has_character_modifier = halaani_whiskey_intoxication
					has_character_modifier = sulfuron_slammer_intoxication
					has_character_modifier = metal_brew_intoxication
					has_character_modifier = tiger_stout_intoxication
					has_character_modifier = serpent_ale_intoxication
				}
			}
			FROM = {
				custom_tooltip = {
					text = is_not_busy_trigger_tooltip
					hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
				}
				is_inaccessible_trigger = no
			}

			# FROM = {
				# conditional_tooltip = {
					# trigger = { NOT = { ROOT = { character = PREV } } }
					# is_inaccessible_trigger = no
				# }
			# }
		}

		effect = {
			FROM = {
				set_character_flag = do_not_disturb
				save_event_target_as = brew_giver
			}
			FROMFROM = { save_event_target_as = brew_keg }
			ROOT = {
				save_event_target_as = brew_receiver
				character_event = { id = WCLIFES.35 }
					# if = {
						# trigger = {
							# OR = {
								# has_artifact = halaani_whiskey_keg
								# has_artifact = sulfuron_slammer_keg
								# has_artifact = metal_brew_keg
							# }
						# }
						# character_event = { id = WCLIFES.30 }
					# }
					# else = { character_event = { id = WCLIFES.31 } }
			}
			# if = {
				# FROM = { limit = { ai = no } }
				# FROM = {
					# if = {
						# trigger = {
							# OR = {
								# has_artifact = halaani_whiskey_keg
								# has_artifact = sulfuron_slammer_keg
								# has_artifact = metal_brew_keg
							# }
						# }
						# character_event = { id = WCLIFES.30 }
					# }
					# else = { character_event = { id = WCLIFES.31 } }
				# }
			# }
			# else = {
				# random_list = {
					# 10 = {
						# modifier = {
							# factor = 0
							# NOT = { has_artifact = halaani_whiskey_keg }
						# }
						# event_target:brew_receiver = { add_character_modifier = { name = halaani_whiskey_intoxication months = 36 } }
						# event_target:brew_giver = {
							# random_artifact = {
								# limit = { artifact_type = halaani_whiskey_keg }
								# drink_keg_brew_effect = yes
							# }
						# }
					# }
					# 10 = {
						# modifier = {
							# factor = 0
							# NOT = { has_artifact = sulfuron_slammer_keg }
						# }
						# event_target:brew_receiver = { add_character_modifier = { name = sulfuron_slammer_intoxication months = 36 } }
						# event_target:brew_giver = {
							# random_artifact = {
								# limit = { artifact_type = sulfuron_slammer_keg }
								# drink_keg_brew_effect = yes
							# }
						# }
					# }
					# 10 = {
						# modifier = {
							# factor = 0
							# NOT = { has_artifact = metal_brew_keg }
						# }
						# event_target:brew_receiver = { add_character_modifier = { name = metal_brew_intoxication months = 36 } }
						# event_target:brew_giver = {
							# random_artifact = {
								# limit = { artifact_type = metal_brew_keg }
								# drink_keg_brew_effect = yes
							# }
						# }
					# }
					# 10 = {
						# modifier = {
							# factor = 0
							# NOT = { has_artifact = tiger_stout_keg }
						# }
						# event_target:brew_receiver = { add_character_modifier = { name = tiger_stout_intoxication months = 36 } }
						# event_target:brew_giver = {
							# random_artifact = {
								# limit = { artifact_type = tiger_stout_keg }
								# drink_keg_brew_effect = yes
							# }
						# }
					# }
					# 10 = {
						# modifier = {
							# factor = 0
							# NOT = { has_artifact = serpent_ale_keg }
						# }
						# event_target:brew_receiver = { add_character_modifier = { name = serpent_ale_intoxication months = 36 } }
						# event_target:brew_giver = {
							# random_artifact = {
								# limit = { artifact_type = serpent_ale_keg }
								# drink_keg_brew_effect = yes
							# }
						# }
					# }
				
				# }
			# }
		}

		revoke_allowed = { always = no }

		ai_will_do = {
			factor = 0.1
			modifier = {
				factor = 10
				character = FROM
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM
					value = 30
				}
			}
			modifier = {
				factor = 0
				NOR = {
					is_close_relative = FROM
					is_friend = FROM
					is_lover = FROM
				}
			}
		}
	}
}
